<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng"><head>
<meta http-equiv="X-UA-Compatible" content="IE=7"/>
<title>Large Object Creation</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><link rel="home" href="index.html" title="OpenStack Object Storage Developer Guide"/><link rel="up" href="create-update-object.html" title="Create/Update Object"/><link rel="prev" href="create-update-object.html" title="Create/Update Object"/><link rel="next" href="chunked-transfer-encoding.html" title="Chunked Transfer Encoding"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "treeview-1794";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
        </script><style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
            
        </style><link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/><link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/><!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/><link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/><script type="text/javascript" src="../common/jquery/jquery-1.4.2.min.js"><!----></script><script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script><script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script><script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script><script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script><script type="text/javascript" src="search/nwSearchFnt.js"><!----></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"><!--//make this scalable to other languages as well.--></script><script type="text/javascript" src="search/index-1.js"><!----></script><script type="text/javascript" src="search/index-2.js"><!----></script><script type="text/javascript" src="search/index-3.js"><!----></script><script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-6']);
	  </script><script type="text/javascript" src="../common/ga.js"><!----></script></head><body><div id="header"><a onclick="_gaq.push(['_trackEvent', 'Header', 'logo', 'click', 1]);" target="_blank" href="http://www.openstack.org"><img src="../common/images/openstack-logo.png" alt="OpenStack Documentation" width="157" height="47"/></a><p class="breadcrumbs"><a href="http://docs.openstack.org/">OpenStack Manuals</a><a href="index.html">OpenStack Object Storage Developer Guide
   - API v1</a></p><h1>Large Object Creation</h1><div id="navheader" align="right"><!----><table class="navLinks"><tr><td><a id="showHideButton" onclick="showHideToc(); _gaq.push(['_trackEvent', 'Header', 'show/hide', 'click', 1]);" class="pointLeft" title="Hide TOC tree">Sidebar
                            </a></td><td><a accesskey="p" class="navLinkPrevious" onclick="_gaq.push(['_trackEvent', 'Header', 'prevLink', 'click', 1]);" tabindex="5" href="create-update-object.html">Prev</a>
				      |
                                        <a accesskey="u" class="navLinkUp" onclick="_gaq.push(['_trackEvent', 'Header', 'upLink', 'click', 1]);" tabindex="5" href="create-update-object.html">Up</a>
				  |
                                    <a accesskey="n" class="navLinkNext" onclick="_gaq.push(['_trackEvent', 'Header', 'nextLink', 'click', 1]);" tabindex="5" href="chunked-transfer-encoding.html">Next</a></td></tr></table></div></div><div id="content"><div class="statustext"> </div><div class="section" title="Large Object Creation"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="large-object-creation"/>Large Object Creation</h4></div></div></div><p>Objects that are larger than 5GB must be segmented, prior to upload. You then upload the segments like you would any other object and create a manifest object telling OpenStack Object Storage how to find the segments of the large object. The segments remain individually addressable, but retrieving the manifest object streams all the segments concatenated. There is no limit to the number of segments that can be a part of a single large object.</p><p>In order to ensure the download works correctly, you must upload all the object segments to the same container, ensure each object name has a common prefix where their names sort in the order they should be concatenated. You also create and upload a manifest file. The manifest file is simply a zero-byte file with the extra X-Object-Manifest:  &lt;container&gt;/&lt;prefix&gt; header, where &lt;container&gt;  is the container the object segments are in and &lt;prefix&gt; is the common prefix for all the segments. </p><p>It is best to upload all the segments first and then create or update the manifest. With this method, the full object will not be available for downloading until the upload is complete. Also, you can upload a new set of segments to a second location and then update the manifest to point to this new location. During the upload of the new segments, the original manifest will still be available to download the first set of segments.</p><div class="example"><a id="d6e669"/><p class="title"><strong>Example 3.32. Upload Segment of a Large Object</strong></p><div class="example-contents"><pre class="literallayout">
  PUT /&lt;api version&gt;/&lt;account&gt;/&lt;container&gt;/&lt;object&gt; HTTP/1.1
  Host: storage.clouddrive.com
  X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
  ETag: 8a964ee2a5e88be344f36c22562a6486
  Content-Length: 1
  X-Object-Meta-PIN: 1234
                  </pre><pre class="literallayout">
  s
                    </pre></div></div><br class="example-break"/><p>No response body is returned. A status code of 201 (Created) indicates a successful
              write; status 412 (Length Required) denotes a missing <code class="code">Content-Length</code> or
              <code class="code">Content-Type</code> header in the request. If the MD5 checksum of the data
              written to the storage system does NOT match the (optionally) supplied ETag value, a 422
              (Unprocessable Entity) response is returned.</p><p>You can continue uploading segments like this example shows, prior to uploading the manifest.</p><div class="example"><a id="d6e677"/><p class="title"><strong>Example 3.33. Upload Next Segment of the Large Object</strong></p><div class="example-contents"><pre class="literallayout">
  PUT /&lt;api version&gt;/&lt;account&gt;/&lt;container&gt;/&lt;object&gt; HTTP/1.1
  Host: storage.clouddrive.com
  X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
  ETag: 8a964ee2a5e88be344f36c22562a6486
  Content-Length: 1
  X-Object-Meta-PIN: 1234
                  </pre><pre class="literallayout">
  w
                    </pre></div></div><br class="example-break"/><p>Next, upload the manifest you created that indicates the container the object
              segments reside within. Note that uploading additional segments after the manifest is
              created will cause the concatenated object to be that much larger but you do not need to
              recreate the manifest file for subsequent additional segments.</p><div class="example"><a id="d6e682"/><p class="title"><strong>Example 3.34. Upload Manifest</strong></p><div class="example-contents"><pre class="literallayout">
  PUT /&lt;api version&gt;/&lt;account&gt;/&lt;container&gt;/&lt;object&gt; HTTP/1.1
  Host: storage.clouddrive.com
  X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
  Content-Length: 0
  X-Object-Meta-PIN: 1234
  X-Object-Manifest: container/object/segments
                  </pre><pre class="literallayout">
  [...]
                    </pre></div></div><br class="example-break"/><p>The response's Content-Type for a <span class="command"><strong>GET</strong></span> or <code class="code">HEAD</code> on the manifest will
              be the same as the Content-Type set during the PUT request that created the manifest.
              You can easily change the Content-Type by reissuing the <span class="command"><strong>PUT</strong></span> request.</p></div><script type="text/javascript" src="../common/main.js"><!----></script><hr/><div class="legal"><a href="index.html">Legal notices</a></div></div><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div id="tabs"><ul><li><a href="#treeDiv" tabindex="1"><span class="contentsTab">Contents</span></a></li><li><a href="#searchDiv" tabindex="1"><span class="searchTab">Search</span></a></li></ul><div id="treeDiv"><img src="../common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li tabindex="2"><span class="file"><a href="ch_object-storage-dev-overview.html">1. Overview</a></span><ul><li tabindex="2"><span class="file"><a href="intended-audience-object-dev-guide.html">Intended Audience</a></span></li><li tabindex="2"><span class="file"><a href="doc-change-history-object-dev-guide.html">Document Change History</a></span></li><li tabindex="2"><span class="file"><a href="additional-resources-object-devguide.html">Additional Resources</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="ch_object-storage-dev-general-api.html">2. General API Information</a></span><ul><li tabindex="2"><span class="file"><a href="authentication-object-dev-guide.html">Authentication</a></span><ul><li tabindex="2"><span class="file"><a href="authentication-object-dev-guide.html#d6e223">Request</a></span></li><li tabindex="2"><span class="file"><a href="authentication-object-dev-guide.html#d6e238">Response</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="overview-object-api.html">Overview of API Operations</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="ch_object-storage-dev-api-storage.html">3. API Operations for Storage Services</a></span><ul><li tabindex="2"><span class="file"><a href="storage-account-services.html">Storage Account Services</a></span><ul><li tabindex="2"><span class="file"><a href="s_listcontainers.html">List Containers</a></span><ul><li tabindex="2"><span class="file"><a href="s_serializedlistoutput.html">Serialized List Output</a></span></li><li tabindex="2"><span class="file"><a href="s_list-large-number-containers.html">List Large Number of Containers</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="retrieve-account-metadata.html">Retrieve Account Metadata</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="storage-container-services.html">Storage Container Services</a></span><ul><li tabindex="2"><span class="file"><a href="list-objects.html">List Objects</a></span><ul><li tabindex="2"><span class="file"><a href="serialized-list-output.html">Serialized List Output</a></span></li><li tabindex="2"><span class="file"><a href="list-large-number-of-objects.html">List Large Number of Objects</a></span></li><li tabindex="2"><span class="file"><a href="pseudo-hierarchical-folders-directories.html">Pseudo-Hierarchical Folders/Directories</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="create-container.html">Create Container</a></span></li><li tabindex="2"><span class="file"><a href="delete-container.html">Delete Container</a></span></li><li tabindex="2"><span class="file"><a href="retrieve-container-metadata.html">Retrieve Container Metadata</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="storage-object-services.html">Storage Object Services</a></span><ul><li tabindex="2"><span class="file"><a href="retrieve-object.html">Retrieve Object</a></span></li><li tabindex="2"><span class="file"><a href="create-update-object.html">Create/Update Object</a></span><ul><li tabindex="2" id="webhelp-currentid"><span class="file"><a href="large-object-creation.html">Large Object Creation</a></span></li><li tabindex="2"><span class="file"><a href="chunked-transfer-encoding.html">Chunked Transfer Encoding</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="assigning-cors-headers-to-requests.html">Assigning CORS Headers to Requests</a></span></li><li tabindex="2"><span class="file"><a href="enabling-file-compression-with-content-encoding-header.html">Enabling File Compression with the Content-Encoding Header</a></span></li><li tabindex="2"><span class="file"><a href="enabling-browser-bypass-with-content-disposition-header.html">Enabling Browser Bypass with the Content-Disposition Header</a></span></li><li tabindex="2"><span class="file"><a href="copy-object.html">Copy Object</a></span></li><li tabindex="2"><span class="file"><a href="delete-object.html">Delete Object</a></span></li><li tabindex="2"><span class="file"><a href="retrieve-object-metadata.html">Retrieve Object Metadata</a></span></li><li tabindex="2"><span class="file"><a href="update-object-metadata.html">Update Object Metadata</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="ch_object-storage-dev-troubleshooting.html">4. Troubleshooting</a></span><ul><li tabindex="2"><span class="file"><a href="using-curl-cli.html">Using cURL</a></span><ul><li tabindex="2"><span class="file"><a href="authentication-examples-curl.html">Authentication</a></span></li><li tabindex="2"><span class="file"><a href="determining-storage-useage.html">Determining Storage Usage</a></span></li><li tabindex="2"><span class="file"><a href="creating-a-storage-container.html">Creating a Storage Container</a></span></li><li tabindex="2"><span class="file"><a href="uploading-a-storage-object.html">Uploading a Storage Object</a></span></li><li tabindex="2"><span class="file"><a href="other-curl-commands.html">Other cURL Commands</a></span></li></ul></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="Verifie(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><center><input id="textToSearch" name="textToSearch" type="text" class="searchText"/> &nbsp; <input onclick="Verifie(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></center></fieldset></form></div><div id="searchResults"><center/></div><p class="searchHighlight"><a href="#" onclick="toggleHighlight()">Search Highlighter (On/Off)</a></p></div></div></div></div></body></html>